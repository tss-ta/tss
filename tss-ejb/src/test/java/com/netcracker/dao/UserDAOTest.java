package com.netcracker.dao;

import static org.junit.Assert.*;

import java.sql.Connection;
import java.sql.Statement;
import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.Persistence;
import javax.persistence.Query;

import org.hibernate.Session;
import org.hibernate.SessionFactory;
import org.hibernate.cfg.Configuration;
import org.hibernate.internal.SessionImpl;
import org.junit.Test;

import junit.framework.TestCase;

public class UserDAOTest {

	@Test
	public void testPersist() {
		UserDAO UserDao = new UserDAO();
		User user = new User("Tom", "tom@aol.com", "tompass");
		UserDao.delete(user);
		UserDao.persist(user);
		assertEquals(user,UserDao.get("Tom"));
		UserDao.close();
	}
	
	@Test
	public void testUpdate(){
		UserDAO userDao = new UserDAO();
		User user = new User("Tom", "tom@aol.com", "tompass");
		userDao.delete(user);
		userDao.persist(user);
		User userNew = new User("Tom", "tom2@aol.com", "tompass2");
		userDao.update(userNew);
		User tom = userDao.get("Tom");
		assertEquals("tom2@aol.com", tom.getEmail());
		assertEquals("tompass2", tom.getPassword());
		userDao.close();
	}
}
